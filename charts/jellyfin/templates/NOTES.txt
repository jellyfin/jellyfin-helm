Thank you for installing {{ .Chart.Name }}.

Your release is named {{ .Release.Name }}.

To learn more about the release, try:

  $ helm status {{ .Release.Name }}
  $ helm get all {{ .Release.Name }}

{{- if .Values.httpRoute.enabled }}

HTTPRoute (Gateway API) is ENABLED:
{{- if .Values.httpRoute.parentRefs }}
  Gateway References:
  {{- range .Values.httpRoute.parentRefs }}
    - {{ .name }}{{ if .namespace }} (namespace: {{ .namespace }}){{ end }}{{ if .sectionName }} [{{ .sectionName }}]{{ end }}
  {{- end }}
{{- else }}
  ⚠ WARNING: No parentRefs defined - HTTPRoute will not attach to any Gateway!
{{- end }}
{{- if .Values.httpRoute.hostnames }}
  Hostnames:
  {{- range .Values.httpRoute.hostnames }}
    - {{ . }}
  {{- end }}
{{- end }}
  Rules: {{ len .Values.httpRoute.rules }} route(s) configured
  Backend: {{ include "jellyfin.fullname" . }}:{{ .Values.service.port }}

Access Jellyfin via Gateway API at:
{{- if .Values.httpRoute.hostnames }}
{{- range .Values.httpRoute.hostnames }}
  https://{{ . }}{{ (index $.Values.httpRoute.rules 0).matches 0 .path.value }}
{{- end }}
{{- else }}
  (Configure httpRoute.hostnames for external access)
{{- end }}

Note: Ensure your Gateway API CRDs are installed and Gateway is configured.
{{- else if .Values.ingress.enabled }}
{{- if .Values.ingress.enabled }}

Jellyfin is available via Ingress at:
{{- range .Values.ingress.hosts }}
  http{{ if $.Values.ingress.tls }}s{{ end }}://{{ .host }}{{ (index .paths 0).path }}
{{- end }}
{{- else }}

To access Jellyfin, you can use port-forwarding:

  $ kubectl port-forward --namespace {{ .Release.Namespace }} svc/{{ include "jellyfin.fullname" . }} {{ .Values.service.port }}:{{ .Values.service.port }}

Then visit http://localhost:{{ .Values.service.port }} in your browser.
{{- end }}

Deployment Configuration:
  Revision History Limit: {{ .Values.revisionHistoryLimit }}
  {{- $limit := int .Values.revisionHistoryLimit }}
  {{- if eq $limit 0 }}
  ⚠ WARNING: Revision history is disabled - rollback will not be possible!
  {{- else if eq $limit 1 }}
  ⚠ NOTE: Only 1 revision kept - limited rollback capability
  {{- else }}
  You can rollback to any of the last {{ .Values.revisionHistoryLimit }} revisions using:
    kubectl rollout undo deployment/{{ include "jellyfin.fullname" . }} --namespace {{ .Release.Namespace }}
  {{- end }}
